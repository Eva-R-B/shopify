<style>
	.slider-section {
		position: relative;
		overflow: hidden;
		width: 100%;
		margin: 0 auto;
        padding: 5%;
		border-radius: 12px;
		box-shadow: 0 2px 8px rgba(0,0,0,0.04);
	}
	.slider-track {
		display: flex;
		width: calc(400px * 6); /* 3 visible slides, duplicated for seamless loop */
		animation: slide-left 12s linear infinite;
	}
	.slider-section__title {
        font-size: var(--h2-font-size);
        font-weight: var(--h2-font-weight);
		margin-bottom: 40px;
		color: var(--accent-color);
		text-align: center;
		width: 100%;
	}
	.slider-slide, .picture-slider-slide {
		min-width: 400px;
		max-width: 400px;
		display: flex;
		align-items: center;
		justify-content: center;
		background: transparent;
		position: relative;
	}
	.slider-slide img, .picture-slider-slide img {
		width: 90%;
		height: 200px;
		object-fit: cover;
		border-radius: 8px;
		background-color: #fff;
		box-shadow: 0 1px 4px rgba(0,0,0,0.03);
		display: block;
		margin: 0 auto;
	}
	@keyframes slide-left {
		0% { transform: translateX(0); }
		100% { transform: translateX(-1200px); }
	}
	.slider-section .placeholder {
		opacity: 0.5;
	}
</style>

<div class="slider-section" style="background: {{ section.settings.bg_color | default: '#FAFAFA' }};">
	{% unless section.settings.hide_title %}
	<h2 class="slider-section__title">{{ section.settings.slider_title }}</h2>
	{% endunless %}
	<div class="slider-track">
		{% assign block_count = section.blocks.size %}
		{% if block_count == 1 %}
			{% for i in (1..6) %}
				{% assign block = section.blocks[0] %}
				<div class="picture-slider-slide">
					{% if block.settings.image != blank %}
						<img src="{{ block.settings.image | img_url: '400x150', crop: 'center' }}" alt="Slide Image {{ i }}">
					{% elsif block.settings.asset_image != blank %}
						<img src="{{ block.settings.asset_image | asset_url }}" alt="Slide Image {{ i }}">
					{% else %}
						<img src="{{ 'watch_logo.jpeg' | asset_url }}" alt="Placeholder Logo" class="placeholder">
					{% endif %}
				</div>
			{% endfor %}
		{% else %}
			{% for block in section.blocks %}
				<div class="picture-slider-slide">
					{% if block.settings.image != blank %}
						<img src="{{ block.settings.image | img_url: '400x150', crop: 'center' }}" alt="Slide Image {{ forloop.index }}">
					{% elsif block.settings.asset_image != blank %}
						<img src="{{ block.settings.asset_image | asset_url }}" alt="Slide Image {{ forloop.index }}">
					{% else %}
						<img src="{{ 'watch_logo.jpeg' | asset_url }}" alt="Placeholder Logo" class="placeholder">
					{% endif %}
				</div>
			{% endfor %}
			{% comment %} Duplicate slides for seamless animation {% endcomment %}
			{% for block in section.blocks %}
				<div class="picture-slider-slide">
					{% if block.settings.image != blank %}
						<img src="{{ block.settings.image | img_url: '400x150', crop: 'center' }}" alt="Slide Image {{ forloop.index }}">
					{% elsif block.settings.asset_image != blank %}
						<img src="{{ block.settings.asset_image | asset_url }}" alt="Slide Image {{ forloop.index }}">
					{% else %}
						<img src="{{ 'watch_logo.jpeg' | asset_url }}" alt="Placeholder Logo" class="placeholder">
					{% endif %}
				</div>
			{% endfor %}
		{% endif %}
	</div>
</div>

{% schema %}
{
	"name": "Slider Section",
	"settings": [
		{
			"type": "checkbox",
			"id": "hide_title",
			"label": "Hide Title",
			"default": false
		},
		{
			"type": "color",
			"id": "bg_color",
			"label": "Background Color",
			"default": "#FAFAFA"
		},
		{
			"type": "text",
			"id": "slider_title",
			"label": "Slider Title",
			"default": "Brands we love"
		}
	],
	"blocks": [
		{
			"type": "picture_slide",
			"name": "Picture Slide",
			"settings": [
				{
					"type": "image_picker",
					"id": "image",
					"label": "Slide Image"
				},
				{
					"type": "text",
					"id": "asset_image",
					"label": "Asset Image Filename (optional)",
					"info": "Overrides image picker. Enter asset filename (e.g., logo.png)"
				}
			]
		}
	],
	"presets": [
		{
			"name": "Slider with pictures",
			"category": "Custom Sections",
			"blocks": [
				{ "type": "picture_slide", "settings": { "image": "", "asset_image": "watch_logo.jpeg" } },
				{ "type": "picture_slide", "settings": { "image": "", "asset_image": "watch_logo.jpeg" } },
				{ "type": "picture_slide", "settings": { "image": "", "asset_image": "watch_logo.jpeg" } },
				{ "type": "picture_slide", "settings": { "image": "", "asset_image": "watch_logo.jpeg" } }
			]
		}
	]
}
{% endschema %}
