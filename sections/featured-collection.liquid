

{% assign featured_collection = collections[section.settings.collection] %}

<section class="collection-section">
   <div class="container">
     {% if featured_collection %}
        {% comment %} if section title exists, use it; otherwise, use the default collection title {% endcomment %}
        <h2 class="category-heading">{{section.settings.section_title | default:  featured_collection.title }}</h2>
        <div class="collection-products">
            {% for product in featured_collection.products limit: section.settings.products_to_show %}
                <div class="product-card">
                    <a href="{{ product.url }}">
                        {% if product.featured_image %}
                            <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title }}">
                        {% endif %}
                        <h2>{{ product.title }}</h2>
                        <p>{{ product.price | money }}</p>
                    </a>
                </div>


            {% endfor %}
        </div>
    {% else %}
        <p>No collection selected or collection is empty.</p>
    {% endif %}
   </div>

</section>

{% schema %}
{
    "name": "Featured Collection",
    "settings": [
        {"type": "text",
        "id": "section_title",
        "label": "Section Title",
        },
        {
            "type": "collection",
            "id": "collection",
            "label": "Collection",
        },
        {
            "type": "number",
            "id": "products_to_show",
            "label": "Number of products to show",
            "default": 4
        }
    ],
    "presets": [
        {
            "name": "Featured Collection",
            "category": "General"
        }
    ]
}
{% endschema %}