{% comment %} 
depending on where the featured collection is places, it is gonna show products from that specific settings. you can change the titel, and the number of products to show.
if you change the settings in one section, it will not affect the other sections. {% endcomment %}

{% assign featured_collection = collections[section.settings.collection] %}

<section class="collection-section">
   <div class="container">
     {% if featured_collection %}
        {% comment %} if section title exists, use it; otherwise, use the default collection title {% endcomment %}
        <h2 class="category-heading">{{section.settings.section_title | default:  featured_collection.title }}</h2>
        <div class="collection-products">
            {% for product in featured_collection.products limit: section.settings.products_to_show %}
                <div class="product-card">
                    <a href="{{ product.url }}">
                        {% if product.featured_image %}
                            <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title }}">
                        {% endif %}
                        <h2>{{ product.title }}</h2>
                        <p>{{ product.price | money }}</p>
                    </a>
                </div>


            {% endfor %}
        </div>
    {% endif %}

    {% comment %} empty message {% endcomment %}
      {% if section.settings.collection == blank %}
    <p class="featured-collection-empty">Please select a collection to feature.</p>
      {% endif %}

   </div>

</section>

{% schema %}
{
    "name": "Featured Collection",
    "settings": [
        {"type": "text",
        "id": "section_title",
        "label": "Section Title",
        },
        {
            "type": "collection",
            "id": "collection",
            "label": "Collection",
        },
        {
            "type": "number",
            "id": "products_to_show",
            "label": "Number of products to show",
            "default": 4
        }
    ],
    "presets": [
        {
            "name": "Featured Collection",
            "category": "General"
        }
    ]
}
{% endschema %}